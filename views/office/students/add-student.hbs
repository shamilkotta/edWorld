{{> office/students}}

<section class="mt-5">
  <h4 class="mb-4">Add new Student</h4>
  <form
    method="post"
    action="/office/students/add-student"
    enctype="multipart/form-data"
    style="max-width: 1000px;"
  >
    <div class="row">
      <div class="col-12 col-sm-6 col-md-4 my-3">
        <div class="form-outline input-group-lg">
          <input
            type="text"
            id="name"
            name="name"
            class="form-control"
            required
            pattern="^[A-Za-z ]+$"
            title=".Enter a valid name"
          />
          <label class="form-label" for="name">Name</label>
        </div>
      </div>
      <div class="col-12 col-sm-6 col-md-4 my-3">
        <div class="form-outline input-group-lg">
          <input
            type="text"
            id="phone"
            name="phone"
            class="form-control"
            required
            pattern="^[0]?[6789]\d{9}$"
            title="Enter a valid phone number"
          />
          <label class="form-label" for="phone">Phone</label>
        </div>
      </div>
      <div class="col-12 col-sm-6 col-md-4 my-3">
        <div class="form-outline input-group-lg">
          <input
            type="email"
            id="email"
            name="email"
            class="form-control"
            required
          />
          <label class="form-label" for="email">Email</label>
        </div>
      </div>
    </div>

    <div class="row mb-3">
      <div class="col-12 col-md-8 row">
        <div class="col-12 col-sm-6 my-3">
          <div class="form-outline input-group-lg">
            <input
              type="text"
              id="birth_date"
              name="birth_date"
              class="form-control"
              max="{{today}}"
              onfocus="(this.type='date')"
              onblur="if(!this.value)this.type='text'"
              required
            />
            <label class="form-label" for="birth_date">Date of birth</label>
          </div>
        </div>
        <div class="col-12 col-sm-6 my-3">
          <div class="input-group-lg">
            <select
              class="form-select form-control form-select-lg"
              name="gender"
            >
              <option selected value="Not specified">Gender</option>
              <option value="Male">Male</option>
              <option value="Female">Female</option>
              <option value="Other">Other</option>
            </select>
          </div>
        </div>
        <div class="col-12 col-sm-6 my-3">
          <div class="form-outline input-group-lg">
            <input
              type="text"
              id="parent_name"
              name="parent_name"
              class="form-control"
              required
              pattern="^[A-Za-z ]+$"
              title=".Enter a valid name"
            />
            <label class="form-label" for="parent_name">Parent Name</label>
          </div>
        </div>
        <div class="col-12 col-sm-6 my-3">
          <div class="form-outline input-group-lg">
            <input
              type="text"
              id="parent_phone"
              name="parent_phone"
              class="form-control"
              required
              pattern="^[0]?[6789]\d{9}$"
              title="Enter a valid phone number"
            />
            <label class="form-label" for="parent_phone">Parent Phone</label>
          </div>
        </div>
        <div class="col-12 col-sm-6 my-3">
          <div class="form-outline input-group-lg">
            <input
              type="text"
              id="education"
              name="education"
              class="form-control"
              required
            />
            <label class="form-label" for="education">Education</label>
          </div>
        </div>
        <div class="col-12 col-sm-6 my-3">
          <div class="form-outline input-group-lg">
            <input
              type="text"
              id="institute"
              name="institute"
              class="form-control"
              required
            />
            <label class="form-label" for="institute">Institute</label>
          </div>
        </div>
        <div class="col-12 col-sm-6 my-3">
          <div class="form-outline input-group-lg">
            <input
              type="text"
              id="university"
              name="university"
              class="form-control"
              required
            />
            <label class="form-label" for="university">University / Board</label>
          </div>
        </div>
        <div class="col-12 col-sm-6 my-3">
          <div class="input-group-lg">
            <select
              class="form-select form-control form-select-lg"
              name="batch"
              required
            >
              <option selected value="">Batch</option>
              {{#each openBatches}}
                <option value="{{this.code}}">{{this.code}}</option>
              {{/each}}
            </select>
          </div>
        </div>
      </div>

      <div class="col-12 col-sm-6 col-md-4 row">
        <div class="col-12 mt-auto">
          <div class="border border-1 mx-auto p-2" style="width: fit-content;">
            <img
              src="/static/svg/user-add.svg"
              alt="profile"
              width="150px"
              height="150px"
              id="profile-preview"
              class=""
            />
          </div>
        </div>
        <div class="col-12 my-3">
          <div class="form-outline input-group-lg">
            <input
              type="file"
              id="profile"
              name="profile"
              class="form-control"
              accept="image/png, image/jpg, image/jpeg"
              required
            />
          </div>
          <div class="form-text">
            Max. 1MB size (500 X 500 ratio recommended)
          </div>
        </div>
      </div>
    </div>

    <div class="d-flex flex-column mb-4">
      <div class="" style="position: relative;">
        <hr />
        <span
          class="py-1 px-2 bg-white"
          style="position: absolute; top: 0;"
        >Address</span>
      </div>
      <div class="row">
        <div class="col-12 col-sm-6 col-md-4 my-3">
          <div class="form-outline input-group-lg">
            <input
              type="text"
              id="house_name"
              name="house_name"
              class="form-control"
            />
            <label class="form-label" for="house_name">House Name</label>
          </div>
        </div>
        <div class="col-12 col-sm-6 col-md-4 my-3">
          <div class="form-outline input-group-lg">
            <input
              type="text"
              id="place"
              name="place"
              class="form-control"
              required
            />
            <label class="form-label" for="place">Place</label>
          </div>
        </div>
        <div class="col-12 col-sm-6 col-md-4 my-3">
          <div class="form-outline input-group-lg">
            <input
              type="text"
              id="post"
              name="post"
              class="form-control"
              required
            />
            <label class="form-label" for="post">Post</label>
          </div>
        </div>
        <div class="col-12 col-sm-6 col-md-4 my-3">
          <div class="form-outline input-group-lg">
            <input
              type="text"
              id="pin"
              name="pin"
              class="form-control"
              required
              pattern="^[1-9]{1}[0-9]{2}\s{0,1}[0-9]{3}$"
              title="Enter a valid PIN code"
            />
            <label class="form-label" for="pin">Pin Code</label>
          </div>
        </div>
        <div class="col-12 col-sm-6 col-md-4 my-3">
          <div class="form-outline input-group-lg">
            <input
              type="text"
              id="district"
              name="district"
              class="form-control"
              required
            />
            <label class="form-label" for="district">District</label>
          </div>
        </div>
        <div class="col-12 col-sm-6 col-md-4 my-3">
          <div class="form-outline input-group-lg">
            <input
              type="text"
              id="state"
              name="state"
              class="form-control"
              required
            />
            <label class="form-label" for="state">State</label>
          </div>
        </div>
      </div>
    </div>

    <p class="text-danger">{{error}}</p>
    <p class="text-success">{{success}}</p>

    <!-- Submit button -->
    <button
      type="submit"
      class="btn btn-lg btn-block mb-4"
      style="background-color: #3BB77E; color: #FFF;"
    >Create student</button>
  </form>
</section>

<script>
  document.getElementById('profile').onchange = function () { const src =
  URL.createObjectURL(this.files[0])
  document.getElementById('profile-preview').src = src }
</script>